<!DOCTYPE html>
<html lang="en" class="no-js">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>MalwareLab Project</title>
		<link rel="shortcut icon" href="../favicon.ico">
		<link rel="stylesheet" type="text/css" href="css/normalize.css" />
		<link rel="stylesheet" type="text/css" href="css/demo.css" />
		<link rel="stylesheet" type="text/css" href="css/menu_style.css" />
		<link rel="stylesheet" type="text/css" href="css/component.css" />
		<script src="js/modernizr.custom.js"></script>
		<script src="https://use.fontawesome.com/6b924cb46d.js"></script>
	</head>
	<body>
		<div class="container">
			<ul id="gn-menu" class="gn-menu-main">
					<div class="menu_a">
						<br>
							<ul class="gn-menu">
								<li class="gn-search-item">
									<input placeholder="Search by md5" type="search" class="gn-search">
									<a class="gn-icon gn-icon-search"><span>Search by md5</span></a>
								</li>
								<li><a> <img src="SVG/155-pie-chart.svg" alt=""> Dashboard</a></li>
								<li><a href="upload2.php"><img src="SVG/053-folder-upload.svg" alt=""> Upload Sample</a></li>
								<li><a href ="#"><img src="SVG/101-database.svg" alt=""> Browse Sample</a></li>
								<li><a><img src="SVG/154-bug.svg" alt=""> Malware Analysis</a></li>
								<li><a><img src="SVG/033-books.svg" alt=""> Archived Analysis</a></li>
								<li><a><img src="SVG/171-lab.svg" alt=""> YARA rules</a></li>
								<li><a><img src="SVG/150-cogs.svg" alt=""> Settings</a></li>
							</div>
							</ul>
						<!-- /gn-scroller -->

				</li>
			</ul>
			<header></header>
			<div class="elem_disp">

				<div class="display_box">
				<table>
				 <tr>
				  <div class= "tab-top">
				  <th>Name</th>
				  <th>MD5</th>
				  <th>Details</th>
				  <th>Detection</th>
				  <th>Analysis</th>
				  <th>Size</th>
				 </tr>
				</div>

				<?php
				$conn = mysqli_connect("localhost:3306", "root", "toor", "MalwareLab");
				  // Check connection
				  if ($conn->connect_error) {
				   die("Connection failed: " . $conn->connect_error);
				  } 
				  $sql = "SELECT md5, path, score, size FROM Malwares";
				  $result = $conn->query($sql);
				  if ($result->num_rows > 0) {
				   // output data of each row
					$eye_plus = '<img src="SVG/049-folder-open.svg" alt=""> ';
					$pencil = '<img src="SVG/006-pencil.svg" alt=""> ';
				   while($row = $result->fetch_assoc()) {
				   	$md5 = $row["md5"];
				   	$path = $row["path"];
				    echo "<tr><th>" . $row["path"]. "</th><th>" . $row["md5"] . "</th><th>" . $eye_plus ."View" . "</th><th>" . $row["score"] . "</th><th>" . $pencil . "Edit" . "</th><th>"  . $row["size"] . "</th><th>" . '</div>' . '<a class="btn" href="Samples/'.$path.'" download="'.$path.'.bin"> Download</a>' ;
				}
				echo "</table>";
				} else { echo "0 results"; }
				$conn->close();
				?>
				</div>



		</div><!-- /container -->
		<script src="js/classie.js"></script>
		<script src="js/gnmenu.js"></script>
		<script>
			new gnMenu( document.getElementById( 'gn-menu' ) );
		</script>
	</body>
</html>
